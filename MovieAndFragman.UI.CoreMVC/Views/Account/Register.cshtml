
@{
    ViewData["Title"] = "Register";
}

<header class="page-header">
    <div class="container">
        <h1>Register</h1>
    </div>
</header>
<!-- end page-header -->
<main>
    <section class="content-section" data-background="../images/section-pattern01.png">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    @*@if (ViewBag.Check != null)
                        {
                            if (ViewBag.Check)
                            {
                                <div class="alert alert-success col-lg-8" role="alert">
                                    <span>@ViewBag.Message</span>
                                </div>
                            }
                            else
                            {
                                <div class="alert alert-danger col-lg-8" role="alert">
                                    <span>@ViewBag.Message</span>
                                </div>
                            }
                        }*@

                    <div class="membership">
                        <h6>Start Your Membership</h6>
                        <form id="registerFrom">
                            <div class="form-group">
                                <input type="text" id="FirstName" placeholder="First Name">
                            </div>
                            <div class="form-group">
                                <input type="text" id="LastName" placeholder="Last Name">
                            </div>
                            <div class="form-group">
                                <input type="text" id="UserName" placeholder="User Name">
                            </div>
                            <!-- end form-group -->
                            <div class="form-group">
                                <input type="email" id="Email" placeholder="Your E-mail">
                            </div>
                            <!-- end form-group -->
                            <div class="form-group">
                                <input type="password" id="Password" placeholder="Password"><i class="lni lni-eye"></i>
                            </div>
                            <div class="form-group">
                                <input type="text" id="PhoneNumber" placeholder="Phone Number">
                            </div>
                            <div class="form-group">
                                <input type="date" id="BrithDate" placeholder="Birthdate">
                            </div>
                            <!-- end form-group -->
                            <div class="form-group">
                                <p><input type="checkbox" checked> I agree to accept registration terms about naps and start my membership</p>
                            </div>

                        </form>
                        <!-- end form-group -->
                        <div class="form-group" style="width:100%">
                            <input type="submit" style="width:100%" value="START MEMBERSHIP" id="btnRegister" onclick="Register()">
                        </div>
                        <!-- end form-group -->

                        <div class="or">
                            <span>or</span>
                            <p>You can pick one of it to sign-in</p>
                            <a href="#">
                                <i class="lni lni-facebook-filled"></i>
                                <small>with Facebook</small>
                            </a> <a href="#">
                                <i class="lni lni-google"></i>
                                <small>with Google+</small>
                            </a>
                        </div>
                        <!-- end or -->

                    </div>
                    <!-- end membership -->
                </div>
                <!-- end col-7 -->
                <div class="col-lg-5">
                    <figure class="side-image">
                        <img src="../images/side-image02.png" alt="Image">
                    </figure>
                    <!-- end side-image -->
                </div>
                <!-- end col-5 -->
            </div>
            <!-- end row -->
        </div>
        <!-- end container -->
    </section>
    <!-- end content-section -->

</main>

@section scripts{
    <script>
        $(document).ready(function () {
            GetBtnMyList("../../mylist/getbtn")
        })

        var check = "@ViewBag.Check"
        var message = "@ViewBag.Message"
        if (check != "" && message != "") {
            alertify.alert("Naps",message)
        }
        if (check != "") {
            if (check) {
                alertify.success(message)
            }
            if (!check) {
                alertify.error(mes)
            }
        }

        function Register() {
            $("#btnRegister").prop("disabled", true)
            $("#btnRegister").addClass("btn-secondary")
            var user = {
                UserName: $("#UserName").val(),
                FirstName: $("#FirstName").val(),
                LastName: $("#LastName").val(),
                BrithDate: $("#BrithDate").val(),
                Email: $("#Email").val(),
                PhoneNumber: $("#PhoneNumber").val(),
                Password: $("#Password").val()
            }
            var ck=true
            var elements = document.getElementById("registerFrom").elements;

            for (var i = 0, element; element = elements[i++];) {
                if (element.value === "") {
                    alertify.error("Tüm bilgileri doldurduğunuzdan emin olunuz.")
                    ck = false
                    $("#btnRegister").prop("disabled", false)
                    $("#btnRegister").removeClass("btn-secondary")
                    break
                }
            }
            if (ck) {
            $.ajax({
                type: "POST",
                url: "../../../ajax/RegisterUser",                
                data: JSON.stringify(user),
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    if (response.check) {
                        alertify.success(response.message)
                    } else {
                        alertify.error(response.message)
                        $("#btnRegister").prop("disabled", false)
                        $("#btnRegister").removeClass("btn-secondary")
                    }
                }
            })
            }
        }
    </script>
}